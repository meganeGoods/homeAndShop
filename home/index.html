<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../global.css">
    <link rel="stylesheet" href="./home.css">
    <link rel="stylesheet" href="./catalog/goodsBoard.css">
    <link rel="stylesheet" href="./campaigns/campaigns.css">
    <title>MGCS—ホーム</title>
</head>
<body>
    <header class="toHome">
        <a href="./index.html">
            <img id="MGCS_logo" src="MGCS_logo.svg" height="40px" />
        </a>
        <h1>MGCS公式ショップ</h1>
    </header>
    <div id="topVisual">
    </div>
    <div id="wrapper">
        <div id="catchcopyArea">
            <p id="catchcopy">すべてのお客様に、高品質なメガネグッズを</p>
            <p id="catchcopy_sub">
                MGCS (Megane Goods Creation Studio) では、ある人物をモチーフとしたオリジナルグッズを企画・制作しています。<br>
                ファンの想いをかたちにすることをテーマに、ユニークで遊び心のある、高品質なアイテムを発信してまいります。</p>
        </div>
        <div id="campaignsArea">
        </div>
        <div id="slideArea">
        </div>
        <div id="goodsCatalog">
            <h1>商品</h1>
            <div id="goodsGallery"></div>
            <a href="./catalog/">全ての商品を見る</a>
        </div>
        <div>
            <h1>お知らせ</h1>
            <div id="newsArea">
            </div>
        </div>
    </div>
    <footer>
        <div>
            <h1>SHOP GUIDE</h1>
            <a><h2>ご利用ガイド</h2></a>
            <h2>お支払い方法</h2>
            <p>カード決済|銀行振込|後払い決済|代金引換|AmazonPay|PayPay</p>
            <h2>配送方法</h2>
                <h3>お届け</h3>
                <p>通常ご注文確定または入金確定後、4営業日以内の発送</p>
                <h3>配送方法</h3>
                <p>クロネコヤマトネコポス便<br>
                1,980円以上のお買い上げで<strong>送料無料！</strong></p>
            <a><h2>カタログ購入</h2></a>
        </div>
        <div>
            <h1>INFORMATION</h1>
            <a><h2>品質について</h2></a>
            <a href="./about/index.html"><h2>当社MGCSについて</h2></a>
        </div>
    </footer>

<script src="./newsComponent/news.js"></script>
<script src="./campaigns/campaigns.js"></script>
<script>
const subData = JSON.parse(localStorage.getItem("subData"))

function goodsComponent(goodsData){
    const string = `
    <div class="goods_board">
        <div class="goods_figure">
            <img src=${goodsData.imgPath} alt="${goodsData.name}" width="100px"/>
        </div>
        <div class="goods_description">
            <p class="goodsName">${goodsData.name}</p>
        </div>
    </div>
    `
    const element = new DOMParser().parseFromString(string, "text/html").body.firstElementChild
    return element
}
function addGoodsBoard(){
    const goodsData = JSON.parse(localStorage.getItem('goodsData'))

    const wrapper = document.getElementById("goodsGallery")
    for(let i = 0;i < goodsData.length;i++){
        wrapper.appendChild(goodsComponent(goodsData[i]))
    }
}
addGoodsBoard()
function addCampaigns(){
    const data = JSON.parse(localStorage.getItem('campaignsData'))
    const wrapper = document.getElementById("campaignsArea")
    for(let datum of data){
        wrapper.appendChild(campaignsComponent(datum))
    }
}
addCampaigns()

addNews()
console.log(localStorage.getItem('secretData'))

// データを流し込む
let string = `
<img 
    id="topImg" 
    alt="" 
    src="${subData.topVisual}"/>`
document.getElementById("topVisual").appendChild(
    new DOMParser().parseFromString(string, "text/html").body.firstElementChild
)
document.getElementById("catchcopy_sub").innerHTML = `
    MGCS (Megane Goods Creation Studio) では、${subData.guestName}をモチーフとしたオリジナルグッズを企画・制作しています。<br>
    ファンの想いをかたちにすることをテーマに、ユニークで遊び心のある、高品質なアイテムを発信してまいります。
`


const header = document.querySelector("header")
header.style.opacity = 0
let headerFlag = false
window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;
    if(!headerFlag && scrollY > window.screen.height*9/16){
        headerFlag = true
        header.animate(
        [
            {
            // from
            opacity: 0
            },
            {
            // to
            opacity: 1
            },
        ],
        200,
        );
        setTimeout(()=>{
            if(headerFlag){
                header.style.opacity = 1
            }
        },200)
    }
    else if(headerFlag && scrollY < window.screen.height*9/16){
        headerFlag = false
        header.animate(
        [
            {
            // from
            opacity: 1
            },
            {
            // to
            opacity: 0
            },
        ],
        200,
        );
        setTimeout(()=>{
            if(!headerFlag){
                header.style.opacity = 0
            }
        },200)
    }
});
</script>

</body>
</html>