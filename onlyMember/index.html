<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../global.css">
    <link rel="stylesheet" href="./onlyMember.css">
    <title>MGCS-社員ポータル</title>
</head>
<body>
    <header class="toHome">
        <a href="./index.html">
            <img id="MGCS_logo" src="../home/MGCS_logo.svg" height="40px" />
        </a>
        <h1>MGCS社員ポータル</h1>
        <button id="logOutButton" onclick="logOut()">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f"><path d="M206.78-100.78q-44.3 0-75.15-30.85-30.85-30.85-30.85-75.15v-546.44q0-44.3 30.85-75.15 30.85-30.85 75.15-30.85h277.74v106H206.78v546.44h277.74v106H206.78Zm425.87-152.09L559-328.39 657.61-427H355.48v-106h302.13L559-631.61l73.65-75.52L859.22-480 632.65-252.87Z"/></svg>
            <p  style="font-size: .5rem;margin:1px;">log out</p>
        </button>
    </header>
    <div class="spacerM"></div>
    <div id="wrapper">
        <h1>スレッド</h1>
        <button
            id="createThreadsButton"
            onclick="alert('エラーが発生しました。もう一度お試しください。繰り返し起こるようなら佐々木晴政へ伝えてください。')">
            ＋新しく作成
        </button>
        <div id="threadsArea"></div>
    </div>

<script src="./threads.js"></script>
<script>
if(!localStorage.getItem("userData")){
    location.href = "./admission"
}

const threadsArea = document.getElementById("threadsArea")
const threadsData = JSON.parse(localStorage.getItem("threadsData"))
const userData = JSON.parse(localStorage.getItem("userData"))
threadsData.forEach((x, i) => {
    if(!(x.visibility == "secret" && userData.status == "commons")){
        threadsArea.appendChild(threadsComponent(x, i))
    }
})

function logOut(){
    localStorage.removeItem("userData")
    location.reload()
}
</script>
</body>
</html>